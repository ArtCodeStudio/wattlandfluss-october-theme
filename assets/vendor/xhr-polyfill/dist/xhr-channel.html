
<html>
<head>
<meta charset="utf-8">
<title>xhr-channel</title>
<script>window.xhrPolyfill=window.xhrPolyfill||{},window.xhrPolyfill.originalXMLHttpRequest=window.XMLHttpRequest,window.xhrPolyfill.getOrigin=function(e){var t;if(t=/^(?:\w+\:)?(?:\/\/)([^\/]*)/.exec(e),!t)throw"invalid url";return t[0]},window.xhrPolyfill.parseHeaders=function(e){var t,r,n,i;if(!e)return{};if("string"==typeof e&&(e=e.split(/\r\n/)),"[object Array]"===Object.prototype.toString.apply(e)){for(n={},t=e.length-1;t>=0;t--)i=/^(.+?)\:\s*(.+)$/.exec(e[t]),i&&(n[i[1]]=i[2]);e=n,n=null}if("object"==typeof e){n={};for(r in e)n[r.toLowerCase()]=e[r];e=n,n=null}return e},window.xhrPolyfill.bindEvent=function(e,t,r){var n,i="on"+t;if("addEventListener"in e)return e.addEventListener(t,r,!1);if("attachEvent"in e)return e.attachEvent(i,r);if(i in e)return n=e[i],void(e[i]=n?function(){n.apply(this,arguments),r.apply(this,arguments)}:r);throw"could not bind to event '"+t+"'"},window.xhrPolyfill.resolveUrl=function(e){var t=document.createElement("a");return t.href=e,t.href},window.xhrPolyfill.receiveMessage=function(e,t){var r;if(e.source!==t)return null;if(r=e.data,"string"==typeof r){if("{"!==r[0])return null;r=JSON.parse(r)}return"object"!=typeof r?null:r},window.xhrPolyfill.xhrSend=function(e,t){var r,n,i=window.xhrPolyfill.originalXMLHttpRequest?new window.xhrPolyfill.originalXMLHttpRequest:function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(r){}throw new Error("This browser does not support XMLHttpRequest.")}();if(i.onreadystatechange=function(){var r={};switch(r.id=e.id,r.readyState=this.readyState,this.readyState){case 1:case 2:case 3:break;case 4:r.responseBody=this.responseText,r.responseHeaders=this.getAllResponseHeaders(),r.statusCode=this.status,r.statusText=this.statusText;break;default:throw new Error("invalid state")}t(r)},i.open(e.method,e.url,!0,e.username,e.password),e.requestHeaders){n=window.xhrPolyfill.parseHeaders(e.requestHeaders);for(r in n)i.setRequestHeader(r,n[r])}i.send(e.requestBody)};</script>
<script>window.xhrPolyfill=window.xhrPolyfill||{},window.xhrPolyfill.bindEvent(window,"message",function(i){var n;(n=window.xhrPolyfill.receiveMessage(i,window.parent))&&window.xhrPolyfill.xhrSend(n,function(i){window.parent.postMessage(JSON.stringify(i),"*")})});</script>
</head>
<body>
</body>
</html>